# 기능 요구사항 정리

1. /cart-items API를 호출하여 장바구니 상품 데이터를 불러온다.
   `get` /cart-items : 사용자의 장바구니 목록 조회

- api를 호출해서 장바구니에 상품 데이터를 추가한다.
- 목록이 비었을 경우, 장바구니에 담은 상품이 없습니다라는 fallback 보여준다.

2. 불러온 데이터를 기반으로 Recoil을 사용하여 클라이언트 상태를 관리한다.

- 개별 상품의 선택 여부, 결제 금액, 배송비 등의 상태를 Recoil로 관리한다.
- 전체 선택기능을 제공한다.

3. 상품 선택에 따른 결제 금액, 배송비 등의 동적인 변경 사항을 처리한다.

- 상품 선택/해제 시 결제 금액을 동적으로 변경한다.
- 결제 금액이 10만원 이상일 경우 배송비는 무료이다.
  - 일반은 배송료가 3000원이다.

4. 장바구니 상품의 수량 변경을 할 수 있다.

- 수량 변경을 할 수 있는 플러스, 마이너스 버튼을 만든다.
- 수량 변경은 0이하가 되어선 안 된다.
- `patch` /cart-items/{id}

5. 장바구니에 담긴 상품을 제거할 수 있다.

- `delete` /card-items/{id} : 장바구니 아이템 삭제
- 삭제가 완료되면 장바구니에서 목록이 삭제된다.

6. 새로고침해도 선택한 상품 상태를 유지해서 보여준다.

- 상품 상태 - 체크박스 선택 유지

7. 주문확인을 누르면 장바구니의 종류와, 상품 수, 총 결제금액을 확인할 수 있다.

# GPT Version (요구사항)

1. 장바구니 상품 조회 API 구현

- 장바구니가 비어있을 때, 빈 목록을 반환하는지 확인
- 장바구니에 상품이 존재할 때, 해당 상품 목록을 반환하는지 확인

2. Recoil을 사용하여 클라이언트 상태 관리

- Recoil 상태가 초기에 설정되었을 때, 기본값이 올바른지 확인
- 상품 선택 시 Recoil 상태가 변경되는지 확인
- 전체 선택 기능이 제대로 동작하는지 확인

3. 상품 선택에 따른 결제 금액 및 배송비 처리

- 상품을 선택할 때, 결제 금액이 동적으로 변경되는지 확인
- 결제 금액이 10만원 이상일 때 배송비가 무료인지 확인

4. 장바구니 상품 수량 변경 기능 구현

- 상품 수량을 증가시켰을 때, 정상적으로 변경되는지 확인
- 상품 수량을 감소시켰을 때, 최소값보다 작아지지 않는지 확인

5. 장바구니 상품 제거 기능 구현

- 상품을 제거했을 때, 장바구니에서 해당 상품이 삭제되는지 확인

6. 상품 선택 상태 유지 기능 구현

- 페이지를 새로고침했을 때, 상품 선택 상태가 유지되는지 확인

7. 주문 확인 기능 구현

- 주문 확인 버튼을 눌렀을 때, 장바구니의 종류, 상품 수, 총 결제 금액이 올바르게 표시되는지 확인

# step2 기능 요구사항 정리

## 페이지 이동

- ShoppingCart -> OrderInfo -> PaymentInfo
- PaymentInfo에서 '장바구니로 돌아가기' 버튼을 누르면 기존 결제 정보는 초기화된다.
- ShoppingCart에서의 총 결제 금액은 주문 금액 + 배송비이고, OrderInfo의 총 결제 금액은 주문 금액 + 배송비 - 할인 금액이다.

## 쿠폰 적용

- OrderInfo 페이지에서 '쿠폰 적용하기'버튼을 통해 쿠폰 적용 모달을 열 수 있다.

### 공통

- 쿠폰은 최대 2개까지만 선택할 수 있다.
  - 2개를 선택한 경우 남은 쿠폰을 전부 비활성화한다.
  - 체크를 해제한 경우 사용 가능한 쿠폰이 다시 활성화된다.
- 현재 사용할 수 없는 쿠폰(유효기간 만료, 조건 불일치, 최대 적용 개수 초과)은 비활성화한다.
- 금액 관련 할인 쿠폰의 적용 기준은 최종 결제 금액이 아닌 주문 금액이다.
- 적용 순서에 따라 할인 금액이 달라지는 경우 할인 금액이 더 큰 값을 보여준다.

### 배송비 무료 쿠폰

- 주문 금액이 5만원 이상인 경우 배송비를 0원으로 만든다.
  - 제주도 및 도서 산간 지역에 체크한 경우에도 0원이 적용된다.
- 배송비 무료 쿠폰을 사용한 뒤 제주도 및 도서 산간 지역에 체크해도 배송비는 0원이어야 한다.

### 2개 구매 시 1개 무료 쿠폰

- 어떤 물건을 2개 이상 구입했을 경우 하나를 무료로 제공한다.
- 2개 이상 구입한 품목이 여러 가지인 경우 가장 가격이 높은 물건에 적용한다.

### 5,000원 할인 쿠폰

- 주문 금액이 100,000원 이상인 경우 주문 금액에서 5000원을 뺀다.

### 미라클모닝 30% 할인 쿠폰

- 접속 시간이 오전 4시 ~ 7시인 경우 주문 금액의 30%를 할인한다.

## 배송비

- 주문 금액이 배송비 무료 금액인 10만원을 넘을 경우 배송비는 항상 0원이다.
- 기본 배송비는 3천원이다.
- 제주도 및 도서 산간 지역에 체크한 경우 배송비는 6천원이다. (추가금 3000원)
- 배송비 무료 쿠폰에 적용된 배송비도 할인 금액에 포함된다.
- 배송비 무료 쿠폰을 사용한 경우에도 배송비는 그대로 보여준다
  - 대신 앞서 서술한 바와 같이 배송비 무료 쿠폰으로 얻은 금액이 할인 금액에 포함되므로 총 결제 금액에서는 배송비가 제외된다.
