## API 호출

- [x] get `/cart-items`
- [x] patch `/cart-items/{id}`

## type

- 하나의 장바구니 아이템은 어떤 정보로 구성되어야 하는가?
  - id
  - quantity
  - product
    - id
    - name
    - price
    - imageUrl
    - category
  - isSelected

## Atoms

- [x] cartItemQuantity - 장바구니 아이템 별 수량을 관리하는 atomFamily
- [x] cartItemSelected - 장바구니 아이템의 포함 여부를 관리하는 atomFamily

## Selector(Recoil)

- [x] cartList - 전체 장바구니 리스트를 api 호출을 통해 가져옴
- [x] totalPrice - 전체 아이템 총 주문금액
- [x] shippingFee - 배송비(10만원 이상인 경우 무료)
- [x] cartItemAllSelected - 결제 항목 전체 선택 여부

## 장바구니 계산

- [x] 수량 추가
- [x] 수량 감소
- [x] 아이템 삭제
- [x] 전체 선택
- [x] 전체 선택 해제

## Storage 관리

- id(장바구니에서 몇번째인지)
- quantity
- product
  - id
  - name
  - price
  - imageUrl
  - category
- 선택 여부(프론트엔드)

## test

- [x] 장바구니 데이터 로딩: /cart-items API 호출을 모킹해 장바구니 데이터를 정상적으로 저장하는지 테스트한다.
- [x] 결제 금액 계산: 선택된 상품들의 가격 합계가 결제 금액으로 정상 반영되는지 테스트한다.
- [x] 배송비 계산: 결제 금액에 따라 배송비가 정상적으로 계산되는지 (10만원 이상 무료) 테스트한다.
- [x] 상품 선택 기능: 개별 상품의 선택/해제 시 선택 여부가 정상적으로 변경되는지 테스트한다.
- [x] 수량 변경 기능: 상품의 수량을 변경할 때 올바르게 반영되는지 테스트한다.
- [x] 상품 제거 기능: 장바구니에서 상품을 제거할 때 정상적으로 동작하는지 테스트한다.

## 페이지

- 장바구니 페이지
- 주문 확인 페이지
  - 종류
  - 총 수량
  - 총 결제 금액

</br>
</br>
</br>

## Step2 기능 구현 목록

### 1. 장바구니 페이지

- 기존 구현 그대로

### 2. 주문 확인 페이지

- [ ] 장바구니 페이지에서 체크한 아이템들만 목록 보여야한다.
- [ ] 쿠폰 적용 버튼을 구현한다.
  - [ ] 쿠폰 적용 버튼을 누르면 모달창이 뜬다.

#### 2-1. 쿠폰 적용

- [ ] 쿠폰은 최대 2개까지 적용할 수 있다.
  - [ ] 2개 쿠폰을 사용하는 경우 적용 순서에 따라 할인 금액이 달라질 수 있다. 최종 금액은 할인 금액이 더 큰 값을 기준으로 계산하여 보여준다.
- [ ] 금액을 계산할 때 주문 금액(쿠폰 적용 전)과 최종 결제 금액(쿠폰 적용 후)으로 나누어서 구분한다.
- [ ] A 쿠폰 적용으로 인해 쿠폰 적용 후 가격이 B 쿠폰 적용 조건을 벗어나도, B 쿠폰을 적용 할 수 있다.

#### 2-2. 쿠폰

- [ ] 쿠폰은 총 4개이며 /coupons API를 호출하여 쿠폰 목록을 불러와서 사용한다.

#### 2-3. 배송비

- [ ] 쿠폰 적용 후의 최종 결제 금액과 관계 없이, ‘총 주문 금액’이 100,000원 이상일 경우 무료 배송 혜택이 적용된다.
- [ ] '배송지가 제주도 및 도서 산간 지역입니까?'라는 체크박스에 체크를 했다면, 배송비를 3천원 추가한다.

#### 2-4. 모달

- [ ] react-module 미션에서 배포한 모달 라이브러리를 사용한다.

* 필요한 기능이 있다면 추가하여 버전을 업데이트한다.

- [ ] 모달창에 쿠폰 4개가 다 뜬다.
  - [ ] 적용 불가능한 쿠폰은 disalbed 상태여야한다.
  - [ ] 쿠폰 이름, 만료일, 쿠폰 적용 조건(최소 주문금액,사용 가능 시간)이 보인다.
- [ ] 적용 가능한 쿠폰을 체크하면 할인 금액이 버튼에 렌더링된다.
- [ ] "총 ${할인금액}원 할인 쿠폰 사용하기" 버튼을 누르면

### 결제 금액 확인 페이지

- [ ] 주문한 상품들의 종류와 상품 갯수를 출력한다.
- [ ] 할인이 적용된 가격(총 결제 금액)을 출력한다.
- [ ] 장바구니로 돌아가기 버튼을 구현한다.
  - [ ] 장바구니 페이지로 이동하고 장바구니는 비워져있어야한다.

### Test

- 쿠폰 적용에 따른 다양한 시나리오 및 파생 상태에 대한 테스트 케이스를 작성한다.
<!-- TODO : 추후 테스트 케이스 목록 작성 -->
